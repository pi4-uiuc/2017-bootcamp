<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.21" />


<title>4. Introduction to R - PI4 Computational Bootcamp</title>
<meta property="og:title" content="4. Introduction to R - PI4 Computational Bootcamp">



  








<link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="../../../../css/fonts.css" media="all">
<link rel="stylesheet" href="../../../../css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="../../../../" class="nav-logo">
    <img src="../../../../images/cropped-logo_m.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="../../../../about/">About</a></li>
    
    <li><a href="../../../../post/">Class Notes</a></li>
    
    <li><a href="../../../../reading/">Reading</a></li>
    
    <li><a href="../../../../syllabus/">Syllabus</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">16 min read</span>
    

    <h1 class="article-title">4. Introduction to R</h1>

    
    <span class="article-date">2017/05/27</span>
    

    <div class="article-content">
      <p>This lesson is based on <a href="http://swcarpentry.github.io/r-novice-gapminder/01-rstudio-intro/">Getting Started with R and Rstudio (SWC 1-3)</a>.</p>
<p>Objectives:</p>
<ul>
<li>Understand the utility of R as a language for data analysis</li>
<li>To gain familiarity with the Rstudio IDE: panes, buttons, shortcuts, options</li>
<li>Where to get help in R.</li>
<li>Learn to manage your workspace in an interactive R session</li>
<li>Learn to find, install, and use packages / functions</li>
<li>Load data</li>
<li>call functions</li>
<li>Intro to reproducible research w/ R markdown</li>
</ul>
<div id="getting-started-with-r" class="section level2">
<h2>Getting started with R</h2>
<p>Why R? * by design “a programming language and environment for statistical computing” * Most common language used by academic statisticians. Thus, many methods are developed as R packages and not available elsewhere. * built around stats, with lots of handy functions * data analysis by design * formulas for statistical models e.g. <code>yield ~ genotype + nitrogen + irrigation</code> * vectorization, eg. <code>a &lt;- 4 * X</code> instead of <code>for i in</code>1:length(X) a[i] &lt;- 4 * X[i]` * ggplot ‘grammar of graphics’ among best graphing programs (only get better w/ graphical design programs like photoshop/Inkscape) * dplyr and tidyr for data munging * Integrates with lower level languages (esp C, C++, FORTRAN; Rcpp package for integration w/ C++ excellent) * can do anything</p>
<p>Why not R?</p>
<ul>
<li>different than many programming languages</li>
<li>not good as a “first language” if you plan to use lower level languages in the future</li>
<li>has a reputation for being slow.</li>
<li>It can’t be as fast as a compiled language (like C / FORTRAN)</li>
<li>Recent changes and new packages make it faster and better at handling big data (e.g. by leveraging back-end databases).</li>
</ul>
</div>
<div id="intro-to-rstudio" class="section level2">
<h2>Intro to Rstudio</h2>
<p>Rstudio is the best IDE for programming in R. Developed by the <a href="https://www.rstudio.com/">Rstudio</a> company, which leads the R community as a whole. Many leading R developers including Hadley Wickham (lead author of tidyverse, dplyr, ggplot2) and Yihui Xie (Rmarkdown, Shiny) work there. Now there are lots of ‘plugins’ that facilitate developing in R.</p>
<p>If you love emacs, try the emacs-ess package. Especially if you are mostly writing scripts. It is really quite awesome. However, it doesn’t compare to Rstudio once you start developing packages and writing reports or websites.</p>
<p>There are four panes (CCW from top left):</p>
<ul>
<li>text editor</li>
<li>interactive environment</li>
<li>files/plots/packages/help/viewer</li>
<li>environment/history/build/git</li>
<li>environment: summaries of objects (e.g. data, variables, functions)</li>
<li>history to source / console</li>
<li>git (we will use this alot). Often have to use command line</li>
</ul>
<p>Handy buttons</p>
<ul>
<li>tools</li>
<li>global options</li>
<li>shell</li>
<li>Addins</li>
<li>rerun on save</li>
</ul>
<p>During this lesson I created the repository <a href="https://github.com/pi4-uiuc/day2" class="uri">https://github.com/pi4-uiuc/day2</a>, generated the file [<code>src/download_data_betydb.R]( https://github.com/pi4-uiuc/day2/blob/master/src/download_data_betydb.R), and populated the</code>data/` directory.</p>
<div id="installing-packages" class="section level3">
<h3>Installing packages</h3>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)
devtools::install_packages(&quot;terraref/traits&quot;)
devtools::install_packages(&quot;daattali/addinslist&quot;)</code></pre>
</div>
</div>
<div id="r-packages" class="section level2">
<h2>R packages</h2>
<ul>
<li>CRAN</li>
<li>lots of packages on GitHub</li>
<li>can get dev. versions</li>
<li>some packages not released through CRAN</li>
<li>finding packages</li>
<li>CRAN Task Views , CRAN task views <a href="https://cran.r-project.org/web/views/" class="uri">https://cran.r-project.org/web/views/</a></li>
<li><a href="https://www.rdocumentation.org/">Rdocumentation.org</a></li>
</ul>
</div>
<div id="learning-more-about-r-and-getting-help" class="section level2">
<h2>Learning more about R and Getting Help</h2>
<p>Hadley Wickham’s books</p>
<ul>
<li><a href="http://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="http://adv-r.had.co.nz/">Advanced R</a></li>
<li><a href="http://r-pkgs.had.co.nz/">R Packages</a></li>
</ul>
<p>The following provide real-world examples and announcements of new packages / releases / features.</p>
<ul>
<li><a href="https://www.r-bloggers.com/">R bloggers</a></li>
<li><a href="https://www.jstatsoft.org/index">Journal of Statistical Software</a></li>
<li><a href="https://journal.r-project.org/">R Journal</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/r">Stackoverflow</a> and <a href="https://crossvalidated.com/questions/tagged/r">Cross Validated</a></li>
</ul>
<div id="handy-help-functions" class="section level3">
<h3>handy help functions</h3>
<pre class="r"><code>?function
vignette(package = &#39;dplyr&#39;)
help.search(&#39;bayesian&#39;)</code></pre>
</div>
<div id="stackoverflow-crossvalidated-qa-sites" class="section level3">
<h3>stackoverflow, crossvalidated Q&amp;A sites</h3>
<p>Google works well. For errors / warnings copy parts of the message text (excluding information like variable names, paths, filenames specific to your environment).</p>
<p>What about beyond Google?</p>
<p>Stackexchange family of Q&amp;A sites are excellent. These will frequently show up in your Google searches. When you go there, answers are ranked and often the ‘best’ answer is selected by the question asker. When you ask questions, in many cases you will get an answer in a few hours or a day.</p>
<p>I learned a lot from these sites - they were instrumental in my education as a computational scientist. I have learned by reading existing answers as well as by asking and answering questions. You can see some of these on <a href="https://stackexchange.com/users/68240/david-lebauer">various stackexchange websites</a>.</p>
<p><a href="https://stats.stackexchange.com/questions/5543/for-which-distributions-are-the-parameterizations-in-bugs-and-r-different">This question</a> turned into <a href="https://journal.r-project.org/archive/2013/RJ-2013-020/index.html">a journal article</a>.</p>
<div id="how-to-ask-a-question" class="section level4">
<h4>How to ask a question?</h4>
<p>Minimal reproducible example. See on <a href="https://stackoverflow.com/a/5963610/199217">“How to make a great R reproducible example?”</a>.</p>
<p>Contents:</p>
<ul>
<li>a <strong>minimal dataset</strong>, necessary to reproduce the error or example</li>
<li><code>dput</code> an existing data frame</li>
<li>generate a <code>testdf &lt;- data.frame(x = rnorm(100), y = rep(letters[1:4],25))</code></li>
<li><strong>minimal runnable code</strong> necessary to reproduce the error / example, which can be run on the example dataset.</li>
<li><strong>necessary information</strong> on the used packages, R version and system it is run on.</li>
<li>R version, OS, packages</li>
<li>sometimes the comprehensive information in <code>sessionInfo()</code> or <code>devtools::session_info()</code> will help</li>
<li>for random processes <code>set.seed()</code> for reproducibility</li>
<li>the text of any errors</li>
</ul>
</div>
</div>
</div>
<div id="project-organization" class="section level2">
<h2>Project organization</h2>
<ul>
<li>Put each project in its own directory, which is named after the project.</li>
<li>Put text documents associated with the project in the <code>/doc</code> directory.</li>
<li>Put raw data and metadata in the <code>/data</code> directory, and files generated during cleanup and analysis in a results directory.</li>
<li>Put source for the project’s scripts and programs in the <code>/src</code> or <code>/scripts</code> directory</li>
<li>programs brought in from elsewhere or compiled locally in the <code>/bin</code> directory.</li>
<li>Name all files to reflect their content or function.</li>
</ul>
<p>From <a href="https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/good-enough-practices-for-scientific-computing.pdf">Wilson et al “Good Enough Practices for Scientific Computing”</a> arXiv:1609.00037</p>
<pre class="r"><code>lapply(c(&#39;doc&#39;, &#39;src&#39;, &#39;reports&#39;, &#39;data&#39;, &#39;results&#39;),
       dir.create)</code></pre>
<pre><code>## [[1]]
## [1] TRUE
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] TRUE
## 
## [[4]]
## [1] FALSE
## 
## [[5]]
## [1] TRUE</code></pre>
<p>Here is one that I recently published: <a href="https://github.com/ebimodeling/betydb_manuscript" class="uri">https://github.com/ebimodeling/betydb_manuscript</a></p>
<div id="using-the-r-packaging-system-framework" class="section level3">
<h3>Using the R packaging system framework</h3>
<p>Once you start using functions, the R packaging system and its associated functions provide a good framework for R projects.</p>
<p>Lets look at one that I am currently working on: <a href="https://github.com/ebimodeling/willow_da" class="uri">https://github.com/ebimodeling/willow_da</a></p>
</div>
</div>
<div id="loading-and-evaluating-data" class="section level2">
<h2>Loading and Evaluating Data</h2>
<p>Lets start by downloading the same data that we had last week:</p>
<ul>
<li>file –&gt; import dataset –&gt; from csv</li>
<li>source <a href="http://www.betydb.org/search.csv?search=Salix" class="uri">http://www.betydb.org/search.csv?search=Salix</a></li>
<li>comment symbol = <code>#</code>, skip = <code>2</code>, name = <code>salix</code></li>
</ul>
<p>It is great that the import is rendered as reproducible / reuseable R code, so this can be added to your script:</p>
<pre class="r"><code>library(readr)
salix &lt;- read_csv(&quot;http://www.betydb.org/search.csv?search=Salix&quot;, 
    comment = &quot;#&quot;, skip = 2)</code></pre>
<p>We also want to save a copy of this to our <code>/data</code> folder</p>
<pre class="r"><code>write_csv(salix, path = &#39;data/salix.csv&#39;)</code></pre>
</div>
<div id="control-flow-if-else-for" class="section level2">
<h2>Control Flow (if, else, for)</h2>
<p>Here is how you write a ‘for’ loop in R:</p>
<pre class="r"><code>for(i in 1:10){
  print(paste(&#39;I am on iteration&#39;, i))
}</code></pre>
<pre><code>## [1] &quot;I am on iteration 1&quot;
## [1] &quot;I am on iteration 2&quot;
## [1] &quot;I am on iteration 3&quot;
## [1] &quot;I am on iteration 4&quot;
## [1] &quot;I am on iteration 5&quot;
## [1] &quot;I am on iteration 6&quot;
## [1] &quot;I am on iteration 7&quot;
## [1] &quot;I am on iteration 8&quot;
## [1] &quot;I am on iteration 9&quot;
## [1] &quot;I am on iteration 10&quot;</code></pre>
<p><em>your turn</em></p>
<blockquote>
<p>import Poplar (<em>Populus</em> spp), Miscanthus, and Switchgrass (<em>Panicum</em> spp) data and save these as csv files</p>
</blockquote>
<p>hint: <code>paste0(&quot;http://www.betydb.org/search.csv?search=&quot;, genus)</code></p>
<pre><code>## Warning: 20 parsing failures.
## row col   expected    actual                                              file
##  71  -- 27 columns 2 columns &#39;http://www.betydb.org/search.csv?search=panicum&#39;
##  72  -- 27 columns 2 columns &#39;http://www.betydb.org/search.csv?search=panicum&#39;
##  73  -- 27 columns 2 columns &#39;http://www.betydb.org/search.csv?search=panicum&#39;
##  74  -- 27 columns 2 columns &#39;http://www.betydb.org/search.csv?search=panicum&#39;
##  75  -- 27 columns 2 columns &#39;http://www.betydb.org/search.csv?search=panicum&#39;
## ... ... .......... ......... .................................................
## See problems(...) for more details.</code></pre>
<div id="if-else" class="section level3">
<h3>if, else</h3>
<pre class="r"><code>a &lt;- 1:10
for(i in 1:10){
  if(a[i] %% 2 &gt; 0){
    print(paste(&#39;element&#39;, i, &#39;is&#39;, a[i], &#39;which is even&#39;))
  } else {
    print(paste(&#39;element&#39;, i, &#39;is&#39;, a[i], &#39;which is odd&#39;))
  }
}</code></pre>
<pre><code>## [1] &quot;element 1 is 1 which is even&quot;
## [1] &quot;element 2 is 2 which is odd&quot;
## [1] &quot;element 3 is 3 which is even&quot;
## [1] &quot;element 4 is 4 which is odd&quot;
## [1] &quot;element 5 is 5 which is even&quot;
## [1] &quot;element 6 is 6 which is odd&quot;
## [1] &quot;element 7 is 7 which is even&quot;
## [1] &quot;element 8 is 8 which is odd&quot;
## [1] &quot;element 9 is 9 which is even&quot;
## [1] &quot;element 10 is 10 which is odd&quot;</code></pre>
<p>When you can vectorize ifelse:</p>
<pre class="r"><code>ifelse(a %% 2 &gt; 0, 
       &#39;even&#39;, 
       &#39;odd&#39;)</code></pre>
<pre><code>##  [1] &quot;even&quot; &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;</code></pre>
<p>lets load up all of the csv files we just downloaded into a list of datasets:</p>
<pre class="r"><code>multi_spp_list &lt;- list()</code></pre>
<pre class="r"><code>for(genus in  c(&#39;salix&#39;, &#39;miscanthus&#39;, &#39;acer&#39;)){ # for item(sing) in items(plural) ... 
  multi_spp_list[[genus]] &lt;- read_csv(file.path(&#39;data&#39;, 
                                                paste0(genus, &#39;.csv&#39;)))
} ## should break because acer.csv does not exist</code></pre>
<pre class="r"><code>for(genus in genera){ # for item(sing) in items(plural) ... 
  file &lt;- file.path(&#39;data&#39;, paste0(genus, &#39;.csv&#39;))
  if(file.exists(file)){
    multi_spp_list[[genus]] &lt;- read_csv(file)
  } else {
    warning(paste(&#39;file&#39;, file, &#39;does not exist&#39;))
  }

} ## should break because acer.csv does not exist</code></pre>
<p>This is where it is handy to recall that we previously defined the vector ‘genera’ and use it.</p>
</div>
<div id="vectorization" class="section level3">
<h3>Vectorization</h3>
<pre class="r"><code>a &lt;- c(1, 2, 2, 3)
b &lt;- c(1, 2, 3, 4)

a^2 + b^2</code></pre>
<pre><code>## [1]  2  8 13 25</code></pre>
<pre class="r"><code>c &lt;- sqrt(a^2 + b^2)

abc &lt;- matrix(c(a, b, c), ncol = 3)
abc^2</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    1    2
## [2,]    4    4    8
## [3,]    4    9   13
## [4,]    9   16   25</code></pre>
<p>Element-wise vs. matrix multiplication</p>
<pre class="r"><code># element-wise
a * a + b * b </code></pre>
<pre><code>## [1]  2  8 13 25</code></pre>
<pre class="r"><code>abc * abc</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    1    2
## [2,]    4    4    8
## [3,]    4    9   13
## [4,]    9   16   25</code></pre>
<pre class="r"><code># matrix multiplication:
a %*% a + b %*% b </code></pre>
<pre><code>##      [,1]
## [1,]   48</code></pre>
<pre class="r"><code># abc %*% abc # error ... not allowed</code></pre>
<pre class="r"><code>sapply(1:10, function(x)  x&gt;2)</code></pre>
<pre><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<pre class="r"><code># files &lt;- dir(&quot;data&quot;, pattern = &#39;.csv&#39;, full.names = TRUE)
files &lt;- sapply(genera, function(x) paste0(&#39;data/&#39;, x, &#39;.csv&#39;))

multi_spp_list &lt;- lapply(files, function(x) read_csv(x))</code></pre>
<pre class="r"><code>salix &lt;- multi_spp_list$salix
salix$trait == &#39;Ayield&#39;         ## becomes a logical vector</code></pre>
<pre><code>##    [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [23] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [34] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [45] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [56] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [67] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [78] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [89] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [100] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [111] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [122] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [144] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [166] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [177] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [188] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [199] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [210] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [221] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [232] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [243] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [254] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [276] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [287] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [298] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [309] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [320] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [331] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [342] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [353] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [364] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [375] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [386] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [397] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [408] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [419] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [430] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [441] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [452] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [463] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [474] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [485] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [496] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [507] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [518] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [529] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [540] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [551] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [562] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [573] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [584] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [595] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [606] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [617] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [628] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [639] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [650] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [661] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [672] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [683] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [694] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [705] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [716] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [727] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [738] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [749] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [760] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [771] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [782]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [793]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [804]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [815]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [826]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [837]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [848]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [859]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [870]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [881]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [892]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [903]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [914]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [925]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [936]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [947]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [958]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [969]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [980]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [991]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1002]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1013]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1024]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1035]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1046]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1057]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1068]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1079]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1090]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1101]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1112]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1123]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1134]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1156]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1167]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1178]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1189]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1200]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1211]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1222]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1233]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1244]  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<pre class="r"><code>salix_yield &lt;- salix[salix$trait == &#39;Ayield&#39;,] ## can be used for subsetting

## what fraction of salix yields are &gt; 10?
salix_yield &lt;- salix[salix$trait == &#39;Ayield&#39;,] ## can be used for subsetting

mean(salix_yield$mean &gt; 10, na.rm = TRUE)</code></pre>
<pre><code>## [1] 0.8179872</code></pre>
<pre class="r"><code>lapply(multi_spp_list, class)</code></pre>
<pre><code>## $salix
## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## 
## $populus
## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## 
## $miscanthus
## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## 
## $panicum
## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<pre class="r"><code>lapply(multi_spp_list, function(x) class(x$mean))</code></pre>
<pre><code>## $salix
## [1] &quot;character&quot;
## 
## $populus
## [1] &quot;character&quot;
## 
## $miscanthus
## [1] &quot;numeric&quot;
## 
## $panicum
## [1] &quot;numeric&quot;</code></pre>
<pre class="r"><code>multi_spp_list2 &lt;- lapply(multi_spp_list, 
                          function(x){
                            dplyr::mutate(x, mean = as.numeric(mean))
                          } )</code></pre>
<pre><code>## Warning in evalq(as.numeric(c(&quot;2.13&quot;, &quot;1.20&quot;, &quot;3.27&quot;, &quot;0.634&quot;, &quot;0.677&quot;, :
## NAs introduced by coercion</code></pre>
<pre><code>## Warning in evalq(as.numeric(c(&quot;0.235&quot;, &quot;7.59&quot;, &quot;12.3&quot;, &quot;19.3&quot;, &quot;0.620&quot;, :
## NAs introduced by coercion</code></pre>
<pre class="r"><code>multi_spp_df &lt;- dplyr::bind_rows(multi_spp_list2)


## check that all rows made it 
lapply(multi_spp_list, nrow)</code></pre>
<pre><code>## $salix
## [1] 1248
## 
## $populus
## [1] 857
## 
## $miscanthus
## [1] 2077
## 
## $panicum
## [1] 940</code></pre>
<pre class="r"><code>sum(unlist(lapply(multi_spp_list, nrow)))</code></pre>
<pre><code>## [1] 5122</code></pre>
<pre class="r"><code>nrow(multi_spp_df)</code></pre>
<pre><code>## [1] 5122</code></pre>
<blockquote>
<p>your turn: write the above lapply statement as a for loop</p>
</blockquote>
<p>Save the dataframe in results folder</p>
<pre class="r"><code>write_csv(multi_spp_df, path = &#39;results/multi_spp_df.csv&#39;)</code></pre>
</div>
</div>
<div id="writing-reports-with-r-markdown" class="section level2">
<h2>Writing reports with R markdown</h2>
<p><a href="http://swcarpentry.github.io/r-novice-gapminder/15-knitr-markdown/" class="uri">http://swcarpentry.github.io/r-novice-gapminder/15-knitr-markdown/</a></p>
<p>Support for many languages (Python, SQL, bash) <a href="http://rmarkdown.rstudio.com/authoring_knitr_engines.html#overview" class="uri">http://rmarkdown.rstudio.com/authoring_knitr_engines.html#overview</a></p>
<p>Examples from class are in <a href="https://github.com/pi4-uiuc/day2/blob/master/exploratory-data-analysis.Rmd" class="uri">https://github.com/pi4-uiuc/day2/blob/master/exploratory-data-analysis.Rmd</a></p>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="../../../../index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="../../../../images/hugo-logo.png" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/shell.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="../../../../js/math-code.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-98205888-1', 'auto');
ga('send', 'pageview');
</script>

  </body>
</html>

